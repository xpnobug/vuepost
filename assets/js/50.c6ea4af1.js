(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{415:function(s,t,a){"use strict";a.r(t);var n=a(45),r=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"springboot-教程之访问-mongodb"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#springboot-教程之访问-mongodb"}},[s._v("#")]),s._v(" [SpringBoot 教程之访问 MongoDB")]),s._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"#1-%E9%85%8D%E7%BD%AE-mongodb"}},[s._v("1. 配置 mongodb")]),s._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"#11-%E5%88%9B%E5%BB%BA-admin"}},[s._v("1.1. 创建 admin")])]),s._v(" "),a("li",[a("a",{attrs:{href:"#12-%E5%88%9B%E5%BB%BA-root"}},[s._v("1.2. 创建 root")])]),s._v(" "),a("li",[a("a",{attrs:{href:"#13-%E5%88%9B%E5%BB%BA%E7%94%A8%E6%88%B7%E8%87%AA%E5%B7%B1%E7%9A%84%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E8%A7%92%E8%89%B2"}},[s._v("1.3. 创建用户自己的数据库的角色")])]),s._v(" "),a("li",[a("a",{attrs:{href:"#14-%E6%9F%A5%E7%9C%8B%E7%94%A8%E6%88%B7"}},[s._v("1.4. 查看用户")])]),s._v(" "),a("li",[a("a",{attrs:{href:"#15-%E5%88%A0%E9%99%A4%E7%94%A8%E6%88%B7"}},[s._v("1.5. 删除用户")])])])]),s._v(" "),a("li",[a("a",{attrs:{href:"#spring-boot-%E9%85%8D%E7%BD%AE"}},[s._v("Spring Boot 配置")])]),s._v(" "),a("li",[a("a",{attrs:{href:"#2-%E5%BC%95%E7%94%A8%E5%92%8C%E5%BC%95%E7%94%B3"}},[s._v("2. 引用和引申")])])]),s._v(" "),a("h2",{attrs:{id:"_1-配置-mongodb"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-配置-mongodb"}},[s._v("#")]),s._v(" 1. 配置 mongodb")]),s._v(" "),a("h3",{attrs:{id:"_1-1-创建-admin"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-创建-admin"}},[s._v("#")]),s._v(" 1.1. 创建 admin")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("use admin\ndb.createUser"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"user"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"admin"')]),s._v(",\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"pwd"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"123456"')]),s._v(",\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"roles"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"role"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"userAdminAnyDatabase"')]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"db"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"admin"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),a("h3",{attrs:{id:"_1-2-创建-root"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-创建-root"}},[s._v("#")]),s._v(" 1.2. 创建 root")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("db.createUser"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"user"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"root"')]),s._v(",\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"pwd"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"123456"')]),s._v(",\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"roles"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"role"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"root"')]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"db"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"admin"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),a("h3",{attrs:{id:"_1-3-创建用户自己的数据库的角色"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-创建用户自己的数据库的角色"}},[s._v("#")]),s._v(" 1.3. 创建用户自己的数据库的角色")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("use "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v("\ndb.createUser"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"user"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"test"')]),s._v(",\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"pwd"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"123456"')]),s._v(",\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"roles"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"role"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dbOwner"')]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"db"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"test"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),a("h3",{attrs:{id:"_1-4-查看用户"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-查看用户"}},[s._v("#")]),s._v(" 1.4. 查看用户")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("db.system.users.find"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nshow "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("users")]),s._v("\n")])])]),a("h3",{attrs:{id:"_1-5-删除用户"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-5-删除用户"}},[s._v("#")]),s._v(" 1.5. 删除用户")]),s._v(" "),a("p",[s._v("删除用户必须由账号管理员来删，所以，切换到 admin 角色")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("use admin\ndb.auth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"admin"')]),s._v(","),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"123456"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除单个用户")]),s._v("\ndb.system.users.remove"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("user:"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"XXXXXX"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除所有用户")]),s._v("\ndb.system.users.remove"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),a("h2",{attrs:{id:"spring-boot-配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#spring-boot-配置"}},[s._v("#")]),s._v(" Spring Boot 配置")]),s._v(" "),a("div",{staticClass:"language-properties extra-class"},[a("pre",{pre:!0,attrs:{class:"language-properties"}},[a("code",[a("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("spring.data.mongodb.host")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("localhost")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("spring.data.mongodb.port")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("27017")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("spring.data.mongodb.database")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("test")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("spring.data.mongodb.username")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("root")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("spring.data.mongodb.password")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("root")]),s._v("\n")])])]),a("h2",{attrs:{id:"_2-引用和引申"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-引用和引申"}},[s._v("#")]),s._v(" 2. 引用和引申")]),s._v(" "),a("p",[s._v("https://spring.io/guides/gs/accessing-data-mongodb/")])])}),[],!1,null,null,null);t.default=r.exports}}]);